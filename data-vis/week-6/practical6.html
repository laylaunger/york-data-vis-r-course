<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Layla Unger">
<title>Practical – Data Visualisation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-3084c59541715b928ed342732e9d4313.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://hypothes.is/embed.js"></script><script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data Visualisation</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Welcome!</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../data-vis/data-vis.html" aria-current="page"> 
<span class="menu-text">PSY00122M-A</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/laylaunger" title="Layla on GitHub" class="quarto-navigation-tool px-1" aria-label="Layla on GitHub"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../data-vis/week-6/overview6.html">Week 6: Time Series and Line Plots</a></li><li class="breadcrumb-item"><a href="../../data-vis/week-6/practical6.html">Practical</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/data-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualisation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 1: Principles of Data Visualisation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-1/overview1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-1/study_before1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-1/seminar1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-1/practical1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-1/study_after1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 2: Grammar of Graphics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-2/overview2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-2/study_before2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-2/seminar2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-2/practical2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-2/study_after2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 3: Distributions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-3/overview3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-3/study_before3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-3/seminar3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-3/practical3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-3/study_after3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 4: Barplots for Categorical Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-4/overview4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-4/study_before4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-4/seminar4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-4/practical4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-4/study_after4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 5: Relationships between Variables</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-5/overview5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-5/study_before5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-5/seminar5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-5/practical5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-5/study_after5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 6: Time Series and Line Plots</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-6/overview6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-6/study_before6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prepare!</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-6/seminar6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seminar</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-6/practical6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../data-vis/week-6/study_after6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Consolidate!</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
<li><a href="#session-overview" id="toc-session-overview" class="nav-link" data-scroll-target="#session-overview">Session overview</a></li>
  <li><a href="#philosophy" id="toc-philosophy" class="nav-link" data-scroll-target="#philosophy">Philosophy</a></li>
  </ul>
</li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting started</a></li>
  <li>
<a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a>
  <ul class="collapse">
<li>
<a href="#todays-data" id="toc-todays-data" class="nav-link" data-scroll-target="#todays-data">Today’s data</a>
  <ul class="collapse">
<li><a href="#load-the-data" id="toc-load-the-data" class="nav-link" data-scroll-target="#load-the-data">Load the data</a></li>
  </ul>
</li>
  <li><a href="#look-at-the-data" id="toc-look-at-the-data" class="nav-link" data-scroll-target="#look-at-the-data">Look at the data</a></li>
  <li><a href="#tidy-factor-order" id="toc-tidy-factor-order" class="nav-link" data-scroll-target="#tidy-factor-order">Tidy factor order</a></li>
  <li><a href="#create-a-date-from-year-and-term" id="toc-create-a-date-from-year-and-term" class="nav-link" data-scroll-target="#create-a-date-from-year-and-term">Create a date from <code>year</code> and <code>term</code></a></li>
  <li><a href="#exercise-1-mean-satisfaction-over-time" id="toc-exercise-1-mean-satisfaction-over-time" class="nav-link" data-scroll-target="#exercise-1-mean-satisfaction-over-time">Exercise 1: Mean satisfaction over time</a></li>
  <li><a href="#exercise-2-compare-policies-over-time" id="toc-exercise-2-compare-policies-over-time" class="nav-link" data-scroll-target="#exercise-2-compare-policies-over-time">Exercise 2: Compare policies over time</a></li>
  <li><a href="#exercise-3-avoiding-spaghetti-facet-by-experience" id="toc-exercise-3-avoiding-spaghetti-facet-by-experience" class="nav-link" data-scroll-target="#exercise-3-avoiding-spaghetti-facet-by-experience">Exercise 3: Avoiding spaghetti — facet by experience</a></li>
  <li><a href="#exercise-4-parse-mmss-into-a-time-variable" id="toc-exercise-4-parse-mmss-into-a-time-variable" class="nav-link" data-scroll-target="#exercise-4-parse-mmss-into-a-time-variable">Exercise 4: Parse <code>"mmss"</code> into a time variable</a></li>
  <li><a href="#exercise-5-plot-time-metrics-over-years" id="toc-exercise-5-plot-time-metrics-over-years" class="nav-link" data-scroll-target="#exercise-5-plot-time-metrics-over-years">Exercise 5: Plot time metrics over years</a></li>
  <li><a href="#exercise-6-compare-wait_time-vs-session_time" id="toc-exercise-6-compare-wait_time-vs-session_time" class="nav-link" data-scroll-target="#exercise-6-compare-wait_time-vs-session_time">Exercise 6: Compare <strong>wait_time</strong> vs <strong>session_time</strong></a></li>
  <li><a href="#exercise-7-facet-by-metric-color-by-experience" id="toc-exercise-7-facet-by-metric-color-by-experience" class="nav-link" data-scroll-target="#exercise-7-facet-by-metric-color-by-experience">Exercise 7: Facet by metric, color by experience</a></li>
  <li><a href="#exercise-8-drawing-attention-with-highlighting" id="toc-exercise-8-drawing-attention-with-highlighting" class="nav-link" data-scroll-target="#exercise-8-drawing-attention-with-highlighting">Exercise 8: Drawing attention with highlighting</a></li>
  </ul>
</li>
  <li><a href="#youre-finished" id="toc-youre-finished" class="nav-link" data-scroll-target="#youre-finished">You’re finished! 🎉</a></li>
  <li><a href="#the-code-file" id="toc-the-code-file" class="nav-link" data-scroll-target="#the-code-file">The Code file</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../data-vis/week-6/overview6.html">Week 6: Time Series and Line Plots</a></li><li class="breadcrumb-item"><a href="../../data-vis/week-6/practical6.html">Practical</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Practical</h1>
<p class="subtitle lead">Time Series &amp; Line Graphs</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="introduction" class="level1"><h1>Introduction</h1>
<section id="session-overview" class="level2"><h2 class="anchored" data-anchor-id="session-overview">Session overview</h2>
<p>In this practical you will work with a <strong>tutoring</strong> dataset to: (1) create line graphs for values over time, (2) avoid “spaghetti plots” using grouping, faceting, and highlighting, (3) add uncertainty bands, and (4) parse and plot time values stored as strings such as <code>"MM:SS.s"</code> using <code>lubridate</code> and <code>hms</code>.</p>
</section><section id="philosophy" class="level2"><h2 class="anchored" data-anchor-id="philosophy">Philosophy</h2>
<p>Practicals are not a test. It is expected that you often don’t know how to start, make a lot of mistakes and need help. It is expected that you are familiar with independent study content before the workshop. However, you need not remember or understand every detail as the workshop should build and consolidate your understanding. Tips</p>
<ul>
<li>don’t worry about making mistakes</li>
<li>don’t let what you can not do interfere with what you can do</li>
<li>discussing code with your neighbours will help</li>
<li>look things up in the independent study material</li>
<li>look things up in your own code from earlier workshops</li>
<li>there are no stupid questions</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key
</div>
</div>
<div class="callout-body-container callout-body">
<p>These four symbols are used at the beginning of each instruction so you know where to carry out the instruction.</p>
<p><img src="images/do_on_your_computer.png" class="img-fluid"> Something you need to do on your computer. It may be opening programs or documents or locating a file.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Something you should do in RStudio. It will often be typing a command or using the menus but might also be creating folders, locating or moving files.</p>
<p><img src="images/do_on_internet.png" class="img-fluid"> Something you should do in your browser on the internet. It may be searching for information, going to the VLE or downloading a file.</p>
<p><img src="images/answer.png" class="img-fluid"> A question for you to think about and answer. Record your answers in your script for future reference.</p>
</div>
</div>
</section></section><section id="getting-started" class="level1"><h1>Getting started</h1>
<p><img src="images/do_on_your_computer.png" class="img-fluid"> Start RStudio from the Start menu.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Go the <strong>Files</strong> tab in the lower right pane and click on the <code>...</code> on the right. This will open a “Go to folder” window. Navigate to a place on your computer where you keep your work. Click <strong>Open</strong>.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Also on the Files tab click on <strong>New Folder</strong>. Type <code>data-visualisation-in-r</code> into the box. This will be the folder that we work in throughout.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Make an RStudio project for this workshop by clicking on the drop-down menu on top right where it says <code>Project: (None)</code> and choosing <strong>New Project</strong>, then <strong>New Directory</strong>, then <strong>New Project</strong>. Name the RStudio Project <strong><code>week-6</code></strong>.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Make a new script then save it with a name like <code>time-series.R</code> to carry out the rest of the work.</p>
</section><section id="exercises" class="level1"><h1>Exercises</h1>
<section id="todays-data" class="level2"><h2 class="anchored" data-anchor-id="todays-data">Today’s data</h2>
<p>We’ll use one CSV called <strong>tutoring.csv</strong> which contains simulated data about a university tutoring service. Each row corresponds to data for one tutor in one term.</p>
<p>Key columns you’ll use today:</p>
<ul>
<li>
<code>tutor_id</code> (integer identifier)</li>
<li>
<code>experience</code> (novice, mid, expert)</li>
<li>
<code>year</code> (integer year, e.g., 2021)</li>
<li>
<code>term</code> (winter, spring, summer, autumn)</li>
<li>
<code>policy</code> (<strong>human</strong> vs <strong>ai_assist</strong>)</li>
<li>
<code>student_satisfaction</code> (0–100 scale)</li>
<li>
<code>metric</code> (<strong>wait_time</strong> or <strong>session_time</strong>)</li>
<li>
<code>mmss</code> (character string like <code>"03:48.4"</code> or <code>"29:55.8"</code>)</li>
</ul>
<section id="load-the-data" class="level3"><h3 class="anchored" data-anchor-id="load-the-data">Load the data</h3>
<p><img src="images/do_on_your_computer.png" class="img-fluid"> Save this file in your <code>week-6</code> folder:</p>
<ul>
<li><a href="../data/tutor.csv">tutor.csv</a></li>
</ul>
<p><img src="images/do_in_R.png" class="img-fluid"> Add the following code to your R script and run. <strong>Note</strong> that we will specify <code>col_types</code> in <code>read_csv</code> to force the <code>mmss</code> variable to be read in as a character string. If we did not do this, <code>read_csv</code> might try to read it in as a time but parse it incorrectly, leading to <code>NA</code> values. To do this, we need to specify the type for each column:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tutor</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"tutor.csv"</span>,</span>
<span>                  col_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">col_integer</span>,   <span class="co"># tutor_id</span></span>
<span>                                   <span class="va">col_factor</span>,    <span class="co"># experience</span></span>
<span>                                   <span class="va">col_integer</span>,   <span class="co"># year</span></span>
<span>                                   <span class="va">col_factor</span>,    <span class="co"># term</span></span>
<span>                                   <span class="va">col_factor</span>,    <span class="co"># policy</span></span>
<span>                                   <span class="va">col_double</span>,    <span class="co"># student_satisfaction</span></span>
<span>                                   <span class="va">col_factor</span>,   <span class="co"># metric</span></span>
<span>                                   <span class="va">col_character</span><span class="op">)</span> <span class="co"># mmss</span></span>
<span>                  <span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="look-at-the-data" class="level2"><h2 class="anchored" data-anchor-id="look-at-the-data">Look at the data</h2>
<p><img src="images/do_in_R.png" class="img-fluid"> Examine the variables and first few rows of <code>tutor</code> using <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tutor</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  tutor_id experience  year term   policy    student_satisfaction metric   mmss 
     &lt;int&gt; &lt;fct&gt;      &lt;int&gt; &lt;fct&gt;  &lt;fct&gt;                    &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;
1        1 mid         2021 winter human                    100   wait_ti… 2570…
2        1 mid         2021 winter human                    100   session… 36:2…
3        1 mid         2021 spring human                    100   wait_ti… 2451…
4        1 mid         2021 spring human                    100   session… 26:3…
5        1 mid         2021 summer ai_assist                 50.5 wait_ti… 3524…
6        1 mid         2021 summer ai_assist                 69.8 session… 35:2…</code></pre>
</div>
</div>
</section><section id="tidy-factor-order" class="level2"><h2 class="anchored" data-anchor-id="tidy-factor-order">Tidy factor order</h2>
<p>In this dataset, <code>experience</code> has a natural order from junior to senior and <code>term</code> has a natural order from winter to autumn.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Reorder the levels of <code>experience</code> and <code>season</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tutor</span> <span class="op">&lt;-</span> <span class="va">tutor</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>experience <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">experience</span>,</span>
<span>                             levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"novice"</span>,<span class="st">"mid"</span>,<span class="st">"expert"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         term <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">term</span>,</span>
<span>                             levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"winter"</span>, <span class="st">"spring"</span>, <span class="st">"summer"</span>, <span class="st">"autumn"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/answer.png" class="img-fluid"> Why is it helpful to make the order explicit before plotting?</p>
</section><section id="create-a-date-from-year-and-term" class="level2"><h2 class="anchored" data-anchor-id="create-a-date-from-year-and-term">Create a date from <code>year</code> and <code>term</code>
</h2>
<p>We’ll create a single <strong>date</strong> column representing the first month of each academic term (Winter=Jan, Spring=Apr, Summer=Jul, Autumn=Oct).</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Use <code>case_when()</code> to map term → month, then combine with <code>ym()</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tutor</span> <span class="op">&lt;-</span> <span class="va">tutor</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>month <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">term</span> <span class="op">==</span> <span class="st">"winter"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>    <span class="va">term</span> <span class="op">==</span> <span class="st">"spring"</span> <span class="op">~</span> <span class="fl">4</span>,</span>
<span>    <span class="va">term</span> <span class="op">==</span> <span class="st">"summer"</span> <span class="op">~</span> <span class="fl">7</span>,</span>
<span>    <span class="va">term</span> <span class="op">==</span> <span class="st">"autumn"</span> <span class="op">~</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span>,</span>
<span>  year_month <span class="op">=</span> <span class="fu">ym</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Date at first-of-month</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/do_in_R.png" class="img-fluid"> Check the new variable.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tutor</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">year</span>, <span class="va">term</span>, <span class="va">month</span>, <span class="va">year_month</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
   year term   month year_month
  &lt;int&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;date&gt;    
1  2021 winter     1 2021-01-01
2  2021 winter     1 2021-01-01
3  2021 spring     4 2021-04-01
4  2021 spring     4 2021-04-01
5  2021 summer     7 2021-07-01
6  2021 summer     7 2021-07-01</code></pre>
</div>
</div>
</section><section id="exercise-1-mean-satisfaction-over-time" class="level2"><h2 class="anchored" data-anchor-id="exercise-1-mean-satisfaction-over-time">Exercise 1: Mean satisfaction over time</h2>
<p><img src="images/do_in_R.png" class="img-fluid"> Plot how <code>student_satisfaction</code> changes over <code>year_month</code> with a line and a light uncertainty ribbon depicting <code>mean_se</code> (standard error of the mean). Label the x-axis date as year-month.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> Does satisfaction tend to increase or decrease across years? Any clear term-to-term pattern?</p>
</section><section id="exercise-2-compare-policies-over-time" class="level2"><h2 class="anchored" data-anchor-id="exercise-2-compare-policies-over-time">Exercise 2: Compare policies over time</h2>
<p><img src="images/do_in_R.png" class="img-fluid"> Plot how <code>student_satisfaction</code> changes over <code>year</code> with different lines / uncertainty ribbons in different colors for <code>policy</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> Do the policies diverge or converge over time?</p>
</section><section id="exercise-3-avoiding-spaghetti-facet-by-experience" class="level2"><h2 class="anchored" data-anchor-id="exercise-3-avoiding-spaghetti-facet-by-experience">Exercise 3: Avoiding spaghetti — facet by experience</h2>
<p>What if we wanted to look at how the change in <code>student_satisfaction</code> by <code>policy</code> over <code>year</code> <em>differs</em> across tutors with different levels of <code>experience</code>? This would be a lot to cram into one plot - multiple lines would overlap and make them difficult to disentangle.</p>
<p>When multiple groups overlap, it can be easier to <strong>facet</strong>.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Adapt your code from the previous exercise to facet by <code>experience</code>. Recall that the default facets will show plots horizontally side-by-side, but you can show them vertically by setting <code>nrow</code> to the number of facets (here, the number of <code>experience</code> levels, which is 3). Consider whether it is easier to perceive trends and differences when panels are organized horizontally versus vertically.</p>
<p><img src="images/answer.png" class="img-fluid"> Do the different experience levels show similar effects of policy over time? How does uncertainty / variability influence your perception of effects (if any)?</p>
</section><section id="exercise-4-parse-mmss-into-a-time-variable" class="level2"><h2 class="anchored" data-anchor-id="exercise-4-parse-mmss-into-a-time-variable">Exercise 4: Parse <code>"mmss"</code> into a time variable</h2>
<p>The <code>mmss</code> column is a <strong>character</strong> string like <code>"03:48.4"</code>. We’ll parse it into a proper <strong>time</strong> class for plotting.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Generate a new variable in the <code>tutor</code> dataset: use <code><a href="https://lubridate.tidyverse.org/reference/hms.html">lubridate::ms()</a></code> (minutes/seconds) to create a variable called <code>mmss_period</code> for nice axis formatting.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tutor</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">metric</span>, <span class="va">mmss</span>, <span class="va">mmss_period</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  metric       mmss      mmss_period
  &lt;fct&gt;        &lt;chr&gt;     &lt;Period&gt;   
1 wait_time    2570:45.9 2570M 45.9S
2 session_time 36:22.3   36M 22.3S  
3 wait_time    2451:01.0 2451M 1S   
4 session_time 26:36.6   26M 36.6S  
5 wait_time    3524:16.3 3524M 16.3S
6 session_time 35:24.3   35M 24.3S  </code></pre>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> Why did we <strong>force <code>mmss</code> to character</strong> when reading the CSV? What could go wrong if the import guessed a time type automatically?</p>
</section><section id="exercise-5-plot-time-metrics-over-years" class="level2"><h2 class="anchored" data-anchor-id="exercise-5-plot-time-metrics-over-years">Exercise 5: Plot time metrics over years</h2>
<p>Look at how wait time changes from one year to the next</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Filter the tutor dataset to just <code>metric == "wait_time"</code> and plot mean <code>mmss_period</code> by <code>year</code> with a ribbon.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
</section><section id="exercise-6-compare-wait_time-vs-session_time" class="level2"><h2 class="anchored" data-anchor-id="exercise-6-compare-wait_time-vs-session_time">Exercise 6: Compare <strong>wait_time</strong> vs <strong>session_time</strong>
</h2>
<p>We’ll use the <code>metric</code> column to show how <code>wait_time</code> and <code>session_time</code> change over <code>year</code>.</p>
<p>Note that the ranges of <code>wait_time</code> and <code>session_time</code> are different: <code>wait_time</code> tends to be on the order of days, whereas <code>session_time</code> tends to be on the order of minutes. This will cause problems if we use a common y-axis for both. Here, first create the problematic plot, then edit it to solve the problem.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Plot means and uncertainty ribbons for <code>mmss_period</code> by <code>year</code>, faceting by <code>metric</code> so that <code>wait_time</code> and <code>session_time</code> appear as different panels.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> See how it is very difficult to see changes in <code>session_time</code>, and the large amount of blank white space for <code>wait_time</code>. Why does this happen?</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Within <code>facet_wrap</code>, set <code>scales = "free_y"</code> to allow different y-axis ranges for the two panels.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
</section><section id="exercise-7-facet-by-metric-color-by-experience" class="level2"><h2 class="anchored" data-anchor-id="exercise-7-facet-by-metric-color-by-experience">Exercise 7: Facet by metric, color by experience</h2>
<p>Now let’s add separate lines to see trends in wait_time and session_time for each experience level.</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Adapt your code for the previous exercise to color the lines and fill the ribbons based on <code>experience</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> How do changes in <code>wait_time</code> and <code>session_time</code> differ across <code>experience</code>?</p>
</section><section id="exercise-8-drawing-attention-with-highlighting" class="level2"><h2 class="anchored" data-anchor-id="exercise-8-drawing-attention-with-highlighting">Exercise 8: Drawing attention with highlighting</h2>
<p>What if we want to focus on experts versus non-experts, and de-emphasize differences between tutors with <code>mid</code> or <code>novice</code> levels of experience?</p>
<p><img src="images/do_in_R.png" class="img-fluid"> Create a new variable to highlight <code>expert</code> vs others using <code>mutate</code> and <code>ifelse</code>. Adapt your plot from the previous exercise to: (1) color and fill based on your new highlighting variable, and (2) group lines based on the <code>experience</code> variable. Set the <code>scale_color_manual()</code> and <code>scale_fill_manual()</code> values to choose colors that emphasize experts (e.g., expert in blue, non-experts in gray).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="practical6_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="4200"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/answer.png" class="img-fluid"> Do experts differ systematically from other groups in <code>wait_time</code> and <code>sesion_time</code> trends?</p>
</section></section><section id="youre-finished" class="level1"><h1>You’re finished! 🎉</h1>
<p><a href="../../data-vis/week-6/study_after6.html">Consolidate</a></p>
</section><section id="the-code-file" class="level1"><h1>The Code file</h1>
<p>This contains all the code needed in the workshop even where it is not visible on the webpage.</p>
<p>The <code>practical6.qmd</code> file is the file used to compile the practical. Qmd stands for Quarto markdown. It allows code and ordinary text to be interwoven to produce well‑formatted reports including webpages.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/laylaunger\.github\.io\/data-vis");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Data Visualisation</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
    <a class="nav-link" href="https://github.com/laylaunger">
<p>Layla on GitHub</p>
</a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>